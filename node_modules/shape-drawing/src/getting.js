"use strict";
var setCtx = require("./setCtx");

/**
 * get ctx attr
 * 
 * @param {CanvasRenderingContext2D} ctx canvas rendering content
 * @param {String} key ctx attr key
 * @param {DOMString | CanvasGradient | CanvasPattern | Number} value ctx arrt value
 */
function getting(ctx, key) {
    ctx = setCtx.bind(this)(ctx);

    var args = [].slice.call(arguments, 2);
    var cb;
    if (typeof args[args.length - 1] === "function") {
        cb = args.pop();
    } else {
        throw TypeError("last parma must be a callback function");
    }

    var result = ctx[key] && typeof ctx[key] === "function" ? ctx[key].apply(ctx, args) : ctx[key];
    cb && cb(result, !this || this === window ? ctx : this);

    return !this || this === window ? ctx : this;
}

module.exports = getting;