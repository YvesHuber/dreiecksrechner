"use strict";
var setCtx = require("./setCtx");

/**
 * draw a rect
 * 
 * @param {CanvasRenderingContext2D} ctx canvas rendering content
 * @param {Number} px position point x-coordinate
 * @param {Number} py position point y-coordinate
 * @param {Number} width end point x-coordinate
 * @param {Number} height end point y-coordinate
 * @param {Number} r corner radius
 * @returns {Object}
 */
function drawRect(ctx, px, py, width, height, r) {
    ctx = setCtx.bind(this)(ctx);

    if (!r) {
        ctx.rect(px, py, width, height);
    } else {
        ctx.beginPath();

        ctx.moveTo(px + r, py);
        ctx.lineTo(px + width - r, py);
        ctx.arcTo(px + width, py, px + width, py + r, r);
        ctx.lineTo(px + width, py + height - r);
        ctx.arcTo(px + width, py + height, px + width - r, py + height, r);
        ctx.lineTo(px + r, py + height);
        ctx.arcTo(px, py + height, px, py + height - r, r);
        ctx.lineTo(px, py + r);
        ctx.arcTo(px, py, px + r, py, r);  
        
        ctx.closePath();
    }
    return !this || this === window ? ctx : this;
}

module.exports = drawRect;